<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><title>Mac 利用 Apache 下的 HTTPS 服务 在线应用 安装 服务</title><link rel="stylesheet" href="/css/layout.css">
<link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/img/header.jpg"></head><body><header class="base-menu"><div class="menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Coding的小学生</a></li><li class="menu-item"><a href="/archives" class="menu-link">目录</a></li><li class="menu-item"><a href="/github" class="menu-link">GitHub</a></li><li class="menu-item"><a href="/about" class="menu-link">关于</a></li></ul></nav></div></header><header class="base-mobile-menu"><div class="mobile-menu-wrapper"><div class="menu-layout-bg"></div><nav class="menu-content"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Coding的小学生</a></li><li class="menu-item"><a href="/archives" class="menu-link">目录</a></li><li class="menu-item"><a href="/github" class="menu-link">GitHub</a></li><li class="menu-item"><a href="/about" class="menu-link">关于</a></li></ul></nav><div id="mobile-menu-toggle" class="toggle-menu"><span class="menu-bar"></span><span class="menu-bar"> </span><span class="menu-bar"></span></div></div></header><div class="base-content"><div class="base-content-main"><article class="article-main"><h1 class="article-title">Mac 利用 Apache 下的 HTTPS 服务 在线应用 安装 服务</h1><div class="article-meta"><p class="meta-item meta-time"><span class="meta-item-title">发表于: </span>2017-02-15</p><p class="meta-item meta-category"><span class="meta-item-title">分类于: </span><a href="/categories/技术/" target="_blank" class="category-link">技术</a></p></div><div class="article-content"><p>1.创建ssl文件夹</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo mkdir /private/etc/apache2/ssl</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>2.切换到ssl文件夹</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /private/etc/apache2/ssl</div></pre></td></tr></table></figure>
<p>3.生成ssh等文件相关证书（server.key  +  server.key.pub）</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ssh-keygen -f server.key</div></pre></td></tr></table></figure>
<p>4.生成.csr 文件</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo openssl req -new -key server.key -<span class="keyword">out</span> request.csr</div></pre></td></tr></table></figure>
<p>注意：Common Name 推荐填写自己的ip，<br><img src="http://img.blog.csdn.net/20170215113732595?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlob25nbGk1Mjg2Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<ol>
<li>生成.crt文件</li>
</ol>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo openssl x509 -req -days <span class="number">365</span> -<span class="keyword">in</span> request.csr -signkey server.key -<span class="keyword">out</span> server.crt</div></pre></td></tr></table></figure>
<p>结果如下:<br><img src="http://img.blog.csdn.net/20170215112357497?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlob25nbGk1Mjg2Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>6.配置SSL服务</p>
<p>1.)编辑 httpd.conf 文件</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /private/etc/apache2/httpd.conf</div></pre></td></tr></table></figure>
<p>把以下三行代码前头的注释去掉</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">LoadModule ssl_module libexec/apache2/mod_ssl.so</div><div class="line">Include /private/etc/apache2/extra/httpd-ssl.conf</div><div class="line">Include /private/etc/apache2/extra/httpd-vhosts.conf</div></pre></td></tr></table></figure>
<p>2.)编辑 httpd-ssl.conf 文件</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /private/etc/apache2/extra/httpd-ssl.conf</div></pre></td></tr></table></figure>
<p>把以下两行代码的注释去掉</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SSLCertificateFile <span class="string">"/private/etc/apache2/server.crt"</span></div><div class="line">SSLCertificateKeyFile <span class="string">"/private/etc/apache2/server.key"</span></div></pre></td></tr></table></figure>
<p>3.)httpd-vhosts.conf 文件</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /private/etc/apache2/extra/httpd-vhosts.conf</div></pre></td></tr></table></figure>
<p>在末尾添加如下代码。  内容改成自己的内容。 ServerName 改成自己iP</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;VirtualHost *:443&gt;</div><div class="line">  SSLEngine on</div><div class="line">  SSLCertificateFile /private/etc/apache2/ssl/server.crt</div><div class="line">  SSLCertificateKeyFile /private/etc/apache2/ssl/server.key</div><div class="line">  ServerName 10.2.15.163</div><div class="line">  DocumentRoot "/Users/lhl/Sites/"</div><div class="line">&lt;/VirtualHost&gt;</div></pre></td></tr></table></figure>
<p>7.测试配置及重启Apache</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apachectl -t   <span class="comment">//如果它提示：Syntax OK </span></div><div class="line">sudo apachectl restart</div></pre></td></tr></table></figure>
<p>浏览器输入 <a href="https://10.2.9.163" target="_blank" rel="external">https://10.2.9.163</a> 即可访问成功。<br>注意如果提示不安全访问，请双击安装 server.crt 文件<br>8.配置在线安装app环境<br>1.)配置plist文件<br><img src="http://img.blog.csdn.net/20170215114305004?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlob25nbGk1Mjg2Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>code 如下  news.plist</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</div><div class="line">&lt;plist version="1.0"&gt;</div><div class="line">&lt;dict&gt;</div><div class="line">	&lt;key&gt;items&lt;/key&gt;</div><div class="line">	&lt;array&gt;</div><div class="line">		&lt;dict&gt;</div><div class="line">			&lt;key&gt;assets&lt;/key&gt;</div><div class="line">			&lt;array&gt;</div><div class="line">				&lt;dict&gt;</div><div class="line">					&lt;key&gt;kind&lt;/key&gt;</div><div class="line">					&lt;string&gt;software-package&lt;/string&gt;</div><div class="line">					&lt;key&gt;url&lt;/key&gt;</div><div class="line">					&lt;string&gt;https://10.2.15.163/ipa/news.ipa&lt;/string&gt;</div><div class="line">				&lt;/dict&gt;</div><div class="line">			&lt;/array&gt;</div><div class="line">			&lt;key&gt;metadata&lt;/key&gt;</div><div class="line">			&lt;dict&gt;</div><div class="line">				&lt;key&gt;bundle-identifier&lt;/key&gt;</div><div class="line">				&lt;string&gt;com.sohu.news&lt;/string&gt;</div><div class="line">				&lt;key&gt;kind&lt;/key&gt;</div><div class="line">				&lt;string&gt;software&lt;/string&gt;</div><div class="line">				&lt;key&gt;title&lt;/key&gt;</div><div class="line">				&lt;string&gt;sohunews&lt;/string&gt;</div><div class="line">			&lt;/dict&gt;</div><div class="line">		&lt;/dict&gt;</div><div class="line">	&lt;/array&gt;</div><div class="line">&lt;/dict&gt;</div><div class="line">&lt;/plist&gt;</div></pre></td></tr></table></figure>
<p>2.配置html文件</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset="utf-8" mime-types="text/plain"&gt;</div><div class="line">&lt;title&gt; 测试安装包 &lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line">&lt;body&gt;</div><div class="line">&lt;h1&gt;第一次连接请先安装证书,以后就不需要安装了&lt;/h1&gt;</div><div class="line"></div><div class="line">&lt;h2&gt;</div><div class="line">证书:&lt;a href="https://10.2.15.163/ipa/server.crt"&gt;profile&lt;/a&gt;</div><div class="line">&lt;/h2&gt;</div><div class="line"></div><div class="line">&lt;h2&gt;HTTPS:&lt;a href="itms-services://?action=download-manifest&amp;url=https://10.2.15.163/ipa/news.plist"&gt;</div><div class="line">news-02/13-15:35</div><div class="line">&lt;/a&gt;</div><div class="line">&lt;/h2&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>效果：<br><img src="http://img.blog.csdn.net/20170215115806323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlob25nbGk1Mjg2Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br>最终文件夹文件为：<br><img src="http://img.blog.csdn.net/20170215114820303?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGlob25nbGk1Mjg2Mjg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""></p>
<p>访问 <a href="https://10.2.15.163/ipa.html" target="_blank" rel="external">https://10.2.15.163/ipa.html</a> 即可访问安装应用测试包。</p>
<p>其他：手机也需要先安装crt证书文件才可以下载测试包。</p>
</div></article><div id="base-discus"></div></div></div><footer class="base-footer"><div class="footer-wrapper"><span>Coding的小学生 Using </span><a href="https://github.com/chuguixin/Simple"><span>Simple</span></a><span> Presents For You.</span></div></footer><div class="dom-ready"><script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script><script src="/js/base.js"></script></div></body></html>